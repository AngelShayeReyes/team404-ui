{% extends "layout.njk" %}

{% set title = 'View Competencies Per Band' %}

{% block content  %}

<div class="img-wrap">
  <img src="../images/KainosHeader.jpeg" alt="Kainos Colur Bannar"/>
</div>

<h1>Kainos Competencies for the Engineering Capability</h1>

{% for band in bands %}
    {% set quote = "'" %}
    {% set button = '<button class="competency-button" onclick="expandFunction(' + quote +  band.band + quote + ',' + band.competencies.length + ')"></i>' + band.band + '</button>' %}
    
    {{button | safe}}

    {% for competency in band.competencies %}
        {% set div = '<div class="competency-block" id="' + band.band + loop.index + '">' %}
        {{div | safe}}
            <table id="green-table" summary="This data table shows competencies per band">
            <thead>
                <tr>
                    {% set th = '<th scope="title" colspan=' + competency.indicators.length + '>' + competency.name + '</th>' %}
                    {{th | safe}}
                </tr>
            </thead>
            <tbody>
                <tr>
                    {% for indicator in competency.indicators %}
                        {% set td = '<td scope="row"><b>' + indicator.name + '</b><br>' + indicator.description + '</td>'%}
                        {{td | safe}}
                    {% endfor %}
                </tr>
            </tbody>
            </table>
        </div>
    {% endfor %}
{% endfor %}

<script>
function expandFunction(element_id, no_of_elements) {
  for (let i = 1; i <= no_of_elements; i++) { 
      var x = document.getElementById(element_id + i);
    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }
  }
}
</script>


{% endblock %}